(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/layers/GraphicsLayerView3D":1451,"esri/views/layers/LayerView":1471,"esri/views/3d/layers/LayerView3D":1476,"esri/layers/graphics/centroid":1494,"esri/views/3d/layers/support/projectExtentUtils":1505,"esri/views/3d/layers/graphics/Graphics3DFrustumVisibility":1557,"esri/symbols/support/defaults3D":1689,"esri/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView":1690})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1451:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(11),i(13),i(14),i(9),i(29),i(0),i(1689),i(1476),i(1557),i(1690),i(78),i(1505)],void 0===(n=function(e,t,i,r,n,s,o,a,l,p,u,h,c,d,y,g){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frustumVisibility=new c,t.slicePlaneEnabled=!1,t.supportsDraping=!0,t.overlayUpdating=!1,t.suspendResumeExtent=null,t.fullExtentInLocalViewSpatialReference=null,t}return i(t,e),t.prototype.initialize=function(){var e=this;this._set("graphics3d",new d({owner:this,layer:this.layer,scaleVisibilityEnabled:!0})),this.graphics3d.setup(),this.frustumVisibility.setup(this),this.setupSuspendResumeExtent(),this.handles.add(this.watch("fullOpacity",function(){return e.graphics3d.graphicsCore.opacityChange()})),this.handles.add(this.layer.on("graphic-update",function(t){return e.graphics3d.graphicsCore.graphicUpdateHandler(t)}));var t=g.toViewIfLocal(this).then(function(t){e.fullExtentInLocalViewSpatialReference=t});t&&this.addResolvingPromise(t),this.drawingOrder=this.view.getDrawingOrder(this.layer.uid),this.handles.add(l.whenTrueOnce(this.view,"basemapTerrain.ready",function(){return e.notifyChange("updating")}))},t.prototype.destroy=function(){this.frustumVisibility&&(this.frustumVisibility.destroy(),this._set("frustumVisibility",null)),this.graphics3d&&(this.graphics3d.destroy(),this._set("graphics3d",null))},Object.defineProperty(t.prototype,"drawingOrder",{set:function(e){this.graphics3d.graphicsCore.setDrawingOrder(e),this._set("drawingOrder",e)},enumerable:!0,configurable:!0}),t.prototype.fetchPopupFeatures=function(e,t){return s(this,void 0,void 0,function(){return n(this,function(e){return[2,o.isSome(t)?t.clientGraphics:null]})})},Object.defineProperty(t.prototype,"graphics3DGraphics",{get:function(){return this.graphics3d.graphicsCore.graphics3DGraphics},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphics3DGraphicsByObjectID",{get:function(){return this.graphics3d?this.graphics3d.graphicsCore.graphics3DGraphicsByObjectID:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolUpdateType",{get:function(){return this.graphics3d.graphicsCore.symbolUpdateType},enumerable:!0,configurable:!0}),t.prototype.getRenderingInfo=function(e){return{symbol:e.symbol||u.getDefaultSymbol3D(e.geometry)}},t.prototype.getGraphicFromGraphicUid=function(e){return this.graphics3d.getGraphicFromGraphicUid(e)},t.prototype.whenGraphicBounds=function(e,t){return this.graphics3d.whenGraphicBounds(e,t)},t.prototype.whenSymbolLayerSize=function(e,t){return this.graphics3d.whenSymbolLayerSize(e,t)},t.prototype.queryGraphics=function(){return a.resolve(this.loadedGraphics)},t.prototype.highlight=function(e,t){return void 0===t&&(t={}),this.graphics3d.highlight(e,t)},t.prototype.getStats=function(){return{features:this.loadedGraphics.length,updating:this.updating,elevationUpdating:this.graphics3d.elevationAlignment.updating,visibilityFrustum:!this.frustumVisibility.suspended}},t.prototype.canResume=function(){return!(!this.inherited(arguments)||this.frustumVisibility&&this.frustumVisibility.suspended||this.graphics3d&&this.graphics3d.suspended)},t.prototype.isUpdating=function(){return!(!(this.overlayUpdating||this.graphics3d&&this.graphics3d.updating||this.frustumVisibility&&this.frustumVisibility.updating)&&this.view.basemapTerrain&&this.view.basemapTerrain.ready)},t.prototype.setupSuspendResumeExtent=function(){var e=this;l.init(this.graphics3d.graphicsCore,"computedExtent",function(t){e.suspendResumeExtent=y.enlargeExtent(t,e.suspendResumeExtent,1.2),e.frustumVisibility.setExtent(e.suspendResumeExtent)},!0)},r([p.property({aliasOf:"layer.graphics"})],t.prototype,"loadedGraphics",void 0),r([p.property({dependsOn:["frustumVisibility.suspended","graphics3d.suspended"]})],t.prototype,"suspended",void 0),r([p.property({dependsOn:["frustumVisibility.updating","graphics3d.updating","overlayUpdating"]})],t.prototype,"updating",void 0),r([p.property()],t.prototype,"layer",void 0),r([p.property({readOnly:!0})],t.prototype,"frustumVisibility",void 0),r([p.property({readOnly:!0})],t.prototype,"graphics3d",void 0),r([p.property({type:Boolean})],t.prototype,"slicePlaneEnabled",void 0),r([p.property({aliasOf:"graphics3d.graphicsCore.hasDraped"})],t.prototype,"hasDraped",void 0),r([p.property({type:Boolean})],t.prototype,"supportsDraping",void 0),r([p.property({type:Boolean})],t.prototype,"overlayUpdating",void 0),r([p.property()],t.prototype,"drawingOrder",null),r([p.subclass("esri.views.3d.layers.GraphicsLayerView3D")],t)}(p.declared(h))}.apply(null,r))||(e.exports=n)},1471:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(37),i(348),i(255),i(12),i(201),i(9),i(0)],void 0===(n=function(e,t,i,r,n,s,o,a,l,p,u){return function(e){function t(t){var i=e.call(this)||this;return i.layer=null,i.parent=null,i.view=null,i}return i(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";return a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),p.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},r([u.property()],t.prototype,"layer",void 0),r([u.property()],t.prototype,"parent",void 0),r([u.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),r([u.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),r([u.property()],t.prototype,"view",void 0),r([u.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([u.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([u.subclass("esri.views.layers.LayerView")],t)}(u.declared(s,n,o.Identifiable,l))}.apply(null,r))||(e.exports=n)},1476:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(9),i(29),i(0),i(356),i(1471)],void 0===(n=function(e,t,i,r,n,s,o,a,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return i(t,e),t.prototype.postscript=function(e){this.inherited(arguments),a.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,i){s.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var r=a.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);r?i(r):t()})})},r([o.property()],t.prototype,"view",void 0),r([o.property()],t.prototype,"slicePlaneEnabled",void 0),r([o.subclass("esri.views.3d.layers.LayerView3D")],t)}(o.declared(l))}.apply(null,r))||(e.exports=n)},1494:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){function i(e,t){return e?t?4:3:t?3:2}function r(e,t,r,n,s,o){for(var a=i(s,o),l=r,p=r+a,u=0,h=0,c=0,d=0,y=0,g=0,f=n-1;g<f;g++,l+=a,p+=a){var v=t[l],b=t[l+1],m=t[l+2],w=t[p],I=t[p+1],V=t[p+2],O=v*I-w*b;d+=O,u+=(v+w)*O,h+=(b+I)*O,s&&(c+=(m+V)*(O=v*V-w*m),y+=O),v<e[0]&&(e[0]=v),v>e[1]&&(e[1]=v),b<e[2]&&(e[2]=b),b>e[3]&&(e[3]=b),s&&(m<e[4]&&(e[4]=m),m>e[5]&&(e[5]=m))}if(d>0&&(d*=-1),y>0&&(y*=-1),!d)return null;var x=[u,h,.5*d];return s&&(x[3]=c,x[4]=.5*y),x}function n(e,t,r,n,p){for(var u=i(n,p),h=t,c=t+u,d=0,y=0,g=0,f=0,v=0,b=r-1;v<b;v++,h+=u,c+=u){var m=e[h],w=e[h+1],I=e[h+2],V=e[c],O=e[c+1],x=e[c+2],E=n?o(m,w,I,V,O,x):s(m,w,V,O);if(E)if(d+=E,n){y+=E*(C=l(m,w,I,V,O,x))[0],g+=E*C[1],f+=E*C[2]}else{var C;y+=E*(C=a(m,w,V,O))[0],g+=E*C[1]}}return d>0?n?[y/d,g/d,f/d]:[y/d,g/d]:r>0?n?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function s(e,t,i,r){var n=i-e,s=r-t;return Math.sqrt(n*n+s*s)}function o(e,t,i,r,n,s){var o=r-e,a=n-t,l=s-i;return Math.sqrt(o*o+a*a+l*l)}function a(e,t,i,r){return[e+.5*(i-e),t+.5*(r-t)]}function l(e,t,i,r,n,s){return[e+.5*(r-e),t+.5*(n-t),i+.5*(s-i)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCentroidOptimizedGeometry=function(e,t,s,o){if(!t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);for(var a=e.coords,l=[],p=s?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],u=t.lengths,h=t.coords,c=i(s,o),d=0,y=0,g=u;y<g.length;y++){var f=g[y],v=r(p,h,d,f,s,o);v&&l.push(v),d+=f*c}if(l.sort(function(e,t){var i=e[2]-t[2];return 0===i&&s&&(i=e[4]-t[4]),i}),l.length){var b=6*l[0][2];a[0]=l[0][0]/b,a[1]=l[0][1]/b,s&&(b=6*l[0][4],a[2]=0!==b?l[0][3]/b:0),(a[0]<p[0]||a[0]>p[1]||a[1]<p[2]||a[1]>p[3]||s&&(a[2]<p[4]||a[2]>p[5]))&&(a.length=0)}if(!a.length){var m=t.lengths[0]?n(h,0,u[0],s,o):null;if(!m)return null;a[0]=m[0],a[1]=m[1],s&&m.length>2&&(a[2]=m[2])}return e},t.lineCentroid=n}.apply(null,r))||(e.exports=n)},1505:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(52),i(9),i(56),i(362)],void 0===(n=function(e,t,i,r,n,s){Object.defineProperty(t,"__esModule",{value:!0}),t.toViewIfLocal=function(e){var t=e.view.spatialReference,o=e.layer.fullExtent,a=o&&o.spatialReference;return a?a.equals(t)?r.resolve(o.clone()):n.canProject(a,t)?r.resolve(n.project(o,t)):e.view.state.isLocal?i.safeCast(s.projectGeometry(o,t,e.layer.portalItem).then(function(t){if(!e.destroyed&&t)return t}).catch(function(){return null})):r.resolve(null):r.resolve(null)}}.apply(null,r))||(e.exports=n)},1557:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(6),i(20),i(29),i(0),i(49),i(579)],void 0===(n=function(e,t,i,r,n,s,o,a,l,p){var u=-.3*l.earthRadius;return function(e){function t(){var t=e.call(this)||this;return t.suspended=!1,t._dirty=!0,t.extent=null,t.extentIntersectionDirty=!0,t._isVisibleBelowSurface=!1,t.handles=new s,t.layerView=null,t}return i(t,e),Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},set:function(e){e!==this._dirty&&(this._dirty=e,this.notifyChange("updating"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this.dirty},enumerable:!0,configurable:!0}),t.prototype.setup=function(e){var t=this;this.layerView=e,this.extentIntersection=new p.FrustumExtentIntersection({renderCoordsHelper:e.view.renderCoordsHelper});var i=e.view,r=i.basemapTerrain,n=i.resourceController.scheduler;this.handles.add([i.on("resize",function(){return t.viewChange()}),i.state.watch("camera",function(){return t.viewChange()},!0),n.registerTask(6,function(){return t.update()},function(){return t.dirty}),r.on("elevation-bounds-change",function(){return t.elevationBoundsChange()})]),"local"===i.viewingMode?this.isVisibleBelowSurface=!0:this.handles.add(o.init(r,["opacity","wireframe"],function(){return t.isVisibleBelowSurface=!r.isOpaque()}))},t.prototype.destroy=function(){this.layerView=null,this.extent=null,this.extentIntersection=null,this.handles&&(this.handles.destroy(),this.handles=null)},t.prototype.setExtent=function(e){this.extent=e,this.extentIntersectionDirty=!0,this.dirty=!0},t.prototype.viewChange=function(){this.dirty=!0},t.prototype.elevationBoundsChange=function(){this.dirty=!0,this.extentIntersectionDirty=!0},Object.defineProperty(t.prototype,"isVisibleBelowSurface",{set:function(e){this._isVisibleBelowSurface=e,this.dirty=!0,this.extentIntersectionDirty=!0},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.updateSuspendFrustumVisible(),this.dirty=!1},t.prototype.updateExtentIntersection=function(){if(this.extentIntersectionDirty){this.extentIntersectionDirty=!1;var e,t=this.layerView.view;if(this._isVisibleBelowSurface)e=u;else{var i=t.basemapTerrain.getElevationBounds(),r=i[0],n=i[1];e=r-Math.max(1,(n-r)*(1.2-1))}this.extentIntersection.update(this.extent,t.spatialReference,e)}},t.prototype.updateSuspendFrustumVisible=function(){if(this.extent){this.updateExtentIntersection();var e=this.layerView.view.frustum;this._set("suspended",!this.extentIntersection.isVisibleInFrustum(e))}else this._set("suspended",!1)},r([a.property({readOnly:!0})],t.prototype,"suspended",void 0),r([a.property({readOnly:!0})],t.prototype,"updating",null),r([a.subclass("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],t)}(a.declared(n))}.apply(null,r))||(e.exports=n)},1689:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(25),i(14),i(174),i(384),i(385),i(210),i(211),i(574),i(580)],void 0===(n=function(e,t,i,r,n,s,o,a,l,p,u){Object.defineProperty(t,"__esModule",{value:!0});var h=a.fromSimpleMarkerSymbol(p.defaultPointSymbol2D),c=s.fromSimpleLineSymbol(p.defaultPolylineSymbol2D),d=l.fromSimpleFillSymbol(p.defaultPolygonSymbol2D),y=new o({symbolLayers:[new n({material:{color:u.defaultColor},edges:{type:"solid",size:"1px",color:u.defaultOutlineColor}})]});t.getDefaultSymbol3D=function(e){if(r.isNone(e))return null;switch(e.type){case"mesh":return y;case"point":case"multipoint":return h;case"polyline":return c;case"polygon":case"extent":return d;default:i.neverReached(e)}return null}}.apply(null,r))||(e.exports=n)},1690:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(2),i(1),i(7),i(84),i(6),i(52),i(28),i(20),i(9),i(29),i(0),i(118),i(95),i(347),i(367),i(1576),i(1577),i(1578),i(1579),i(78)],void 0===(n=function(e,t,i,r,n,s,o,a,l,p,u,h,c,d,y,g,f,v,b,m,w,I){var V=function(e){function t(t){var i=e.call(this)||this;return i.graphicsCore=null,i.elevationAlignment=new b,i.highlights=new m,i.handles=new p,i.suspendResumeExtent=null,i}return i(t,e),t.prototype.normalizeCtorArgs=function(e){var t=null;e.scaleVisibilityEnabled&&(delete(e=n({},e)).scaleVisibilityEnabled,t=new w);var i=new v({owner:e.owner,layer:e.layer,asyncUpdates:!1,graphicSymbolSupported:!0});return n({},e,{graphicsCore:i,scaleVisibility:t})},t.prototype.initialize=function(){var e=this;this.scaleVisibility&&"minScale"in this.layer&&this.handles.add(this.layer.watch(["minScale","maxScale"],function(){return e.scaleVisibility.layerMinMaxScaleChangeHandler()}))},t.prototype.setup=function(){var e=this,t=function(t,i,r){return e.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,i,r)};if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),this.scaleVisibility&&"minScale"in this.layer){var i=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,i)}this.highlights&&this.highlights.setup(this.graphicsCore),this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,highlights:this.highlights}),this.handles.add(this.view.watch("clippingArea",function(){return e.updateClippingExtent()})),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics()},t.prototype.destroy=function(){this.handles&&(this.handles.destroy(),this.handles=null),this.elevationAlignment&&(this.elevationAlignment.destroy(),this._set("elevationAlignment",null)),this.scaleVisibility&&(this.scaleVisibility.destroy(),this._set("scaleVisibility",null)),this.graphicsCore&&(this.graphicsCore.destroy(),this._set("graphicsCore",null)),this.highlights&&(this.highlights.destroy(),this._set("highlights",null))},Object.defineProperty(t.prototype,"suspended",{get:function(){return!(!this.scaleVisibility||!this.scaleVisibility.suspended)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.graphicsCore&&this.graphicsCore.updating||this.scaleVisibility&&this.scaleVisibility.updating)},enumerable:!0,configurable:!0}),t.prototype.getGraphicFromGraphicUid=function(e){if(this.owner.loadedGraphics){var t=this.owner.loadedGraphics.find(function(t){return t.uid===e});if(t){var i=this.layer instanceof d?this.layer:null;return y.hydrateGraphic(t,i)}}},t.prototype.whenGraphicBounds=function(e,t){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(e,t):u.reject()},t.prototype.whenSymbolLayerSize=function(e,t){return this.graphicsCore?a.safeCast(this.graphicsCore.whenSymbolLayerSize(e,t)):u.reject()},t.prototype.highlight=function(e,t){if(void 0===t&&(t={}),e instanceof g)return O;if("number"==typeof e)return this.highlight([e],t);if(e instanceof s)return this.highlight([e],t);if(e instanceof l&&(e=e.toArray()),Array.isArray(e)&&e.length>0){if(e[0]instanceof s){var i=e.map(function(e){return e.uid}),r=this.highlights.acquireSet(t,null),n=r.set,o=r.handle;return this.highlights.setUids(n,i),o}if("number"==typeof e[0]){var a=e,p=this.highlights.acquireSet(t,null);n=p.set,o=p.handle;return this.highlights.setObjectIds(n,a),o}}return O},t.prototype.updateClippingExtent=function(){var e=this.view.clippingArea;this.graphicsCore.setClippingExtent(e,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()},t.prototype.setupSuspendResumeExtent=function(){var e=this;this.scaleVisibility&&h.init(this.graphicsCore,"computedExtent",function(t){e.suspendResumeExtent=I.enlargeExtent(t,e.suspendResumeExtent,f.SUSPEND_RESUME_EXTENT_OPTIMISM),e.scaleVisibility.setExtent(e.suspendResumeExtent)},!0)},r([c.property({constructOnly:!0})],t.prototype,"owner",void 0),r([c.property({constructOnly:!0})],t.prototype,"layer",void 0),r([c.property({readOnly:!0,aliasOf:"owner.view"})],t.prototype,"view",void 0),r([c.property({constructOnly:!0})],t.prototype,"graphicsCore",void 0),r([c.property({constructOnly:!0})],t.prototype,"scaleVisibility",void 0),r([c.property({readOnly:!0})],t.prototype,"elevationAlignment",void 0),r([c.property({readOnly:!0})],t.prototype,"highlights",void 0),r([c.property({readOnly:!0,dependsOn:["scaleVisibility.suspended"]})],t.prototype,"suspended",null),r([c.property({readOnly:!0,dependsOn:["graphicsCore.updating","scaleVisibility.updating"]})],t.prototype,"updating",null),r([c.subclass("esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView")],t)}(c.declared(o)),O={remove:function(){},pause:function(){},resume:function(){}};return V}.apply(null,r))||(e.exports=n)}}]);